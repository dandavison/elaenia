#!/usr/bin/env python
import sys

import matplotlib.pyplot as plt

from elaenia.recording import BoesmanRecording
from elaenia.plot import plot_spectrogram
from elaenia.plot import stft

file, = sys.argv[1:]
print(file)
rec = BoesmanRecording.from_file(file)
rec.load()
ss = stft(rec.time_series)

fig = plt.figure(figsize=(16, 4))
ax = plt.gca()
ax.set_title(rec.mp3_file.name)
plot_spectrogram(ss, ax=ax)
plt.savefig(rec.mp3_file.name + ".spectrogram.png")
